# AtoM to RiC-O Mapping Overview

This document explains how Mnemian transforms archival metadata from Access to Memory (AtoM) into Records in Contexts Ontology (RiC-O) v1.1 entities. We focus on the conceptual mapping decisions and the rationale behind our RiC entity choices.

## Core Mapping Principles

We have chosen to use RiC-O's class-rich architecture to maximize relationship richness and demonstrate the full complexity of archival description. This approach enables sophisticated queries and aligns with RiC development direction.

### URI Generation
- Mnemian generates globally unique URIs for each RiC class entity using the pattern `{system setting prefix}/{rico class name lowercase}/{UUID hash}`
- Every RiC class entity requires a URI for RDF publishing
- Examples in documentation use human-readable names like `RecordSet_123` for clarity, but actual implementation uses the URI pattern above

### Property Usage
- `rico:textualValue` is for the names and identifiers of resources being described, such as a record's title or an agent's name
- `rdfs:label` is for the names of the controlled vocabulary terms themselves, such as "Description title" or "Formal title"

## RecordResource Classification

Archival descriptions retrieved from AtoM are mapped to RiC classes based on the `level_of_description` field. These are all children of the parent `rico:RecordResource` class, but we do not use this class directly in Mnemian.

### `rico:RecordSet` (Collections/Fonds - Top Level)
- **AtoM Levels**: Collection, Fonds, Series, Subfonds, Subseries, SubSubseries
- **Purpose**: Represents groupings of records that share common attributes or relations
- **Characteristics**: May contain other RecordSets or Records as members
- **Type Classification**: Uses `rico:RecordSetType` with values like `ric-rst:Collection`, `ric-rst:Fonds`, or `ric-rst:Series`

### `rico:Record` (Series/Subseries - Intermediate Level)
- **AtoM Levels**: Record group, Class, File
- **Purpose**: Represents discrete information content formed by an Agent
- **Characteristics**: May contain RecordParts or be part of a RecordSet
- **Type Classification**: Uses `rico:RecordSetType` with value `ric-rst:File`

### `rico:RecordPart` (Items/Parts - Lowest Level)
- **AtoM Levels**: Part, Item
- **Purpose**: Represents components of a Record with independent information content
- **Characteristics**: Contributes to the intellectual completeness of the parent Record

## Representing Hierarchy

Mnemian transforms AtoM's hierarchical structure into RiC-O relationships using direct property connections between resource entities.

### Hierarchy Mapping Strategy

We use this class model to determine the appropriate RiC-O properties for different parent-child combinations:

- **`rico:RecordSet`** → `rico:hasOrHadPart` → **`rico:Record`** → `rico:isOrWasPartOf` (inverse)
- **`rico:RecordSet`** → `rico:hasOrHadPart` → **`rico:RecordPart`** → `rico:isOrWasPartOf` (inverse)
- **`rico:Record`** → `rico:hasOrHadConstituent` → **`rico:Record`** → `rico:isOrWasConstituentOf` (inverse)
- **`rico:Record`** → `rico:hasOrHadConstituent` → **`rico:RecordPart`** → `rico:isOrWasConstituentOf` (inverse)
- **`rico:RecordPart`** → `rico:hasOrHadConstituent` → **`rico:RecordPart`** → `rico:isOrWasConstituentOf` (inverse)

For any other combinations, we use the fallback pattern: `rico:hasOrHadPart` → `rico:isOrWasPartOf`.

### Implementation Approach

As the AtoM hierarchy is 'fixed', we do not create `rico:RecordResourceToRecordResourceRelation` entities at this stage. Instead, we add relationship properties directly to the resource entities themselves. This avoids the additional complexity of creating addition entities. Future development will support additional `rico:RecordResourceToRecordResourceRelation` entities for more complex relationship modeling beyond simple parent-child hierarchies.

## Instantiation Strategy

In RiC-O, every `rico:RecordResource` MUST have at least one `rico:Instantiation`. We have chosen to maintain two distinct instantiation types to properly represent the dual nature of AtoM descriptions.

### Conceptual Distinction: RecordResource vs Instantiation

#### `rico:RecordResource` (RecordSet/Record/RecordPart)
Represents the **intellectual content** - the "what" of the record:
- Abstract Entity: The information itself, independent of its physical form
- Intellectual Properties: Content, meaning, context, relationships
- Examples: A letter (regardless of whether it's handwritten, typed, or digitized)

#### `rico:Instantiation`
Represents the **physical/digital manifestation** - the "how" of the record:
- Concrete Entity: The actual carrier, format, or medium
- Physical or Digital Properties: Format, condition, technical requirements, storage details
- Examples: A handwritten letter on paper, a digitized PDF of that same letter

### Key Conceptual Differences
- **Abstraction Level**: RecordResource is abstract and intellectual; Instantiation is concrete and physical/digital
- **Relationship**: One-to-Many - One RecordResource can have multiple Instantiations
- **Example**: A letter (RecordResource) might exist as original handwritten version, photocopy, and digitized PDF (three separate Instantiations)

### Mnemian's Instantiation Approach

#### 1. Digital "Archival Description" Instantiation (Always Present)
- **Type**: Digital metadata record
- **Purpose**: Represents the AtoM archival description itself
- **Rationale**: Every AtoM record is inherently a digital metadata description, so we always create this instantiation
- **Properties**:
  - `rico:carrierType` = "Digital" (shared CarrierType entity)
  - `rico:structure` = "Structured metadata, held in Access to Memory (AtoM) database"
  - `dc:source` = AtoM URL (for source attribution)

#### 2. Physical/Digital Item Instantiation
- **Type**: Physical or digital manifestation of the described materials
- **Purpose**: Represents the actual archival materials being described
- **Rationale**: The described materials may be physical or digital, so we create this instantiation based on content analysis
- **Properties**:
  - `rico:physicalCharacteristicsNote` = Physical characteristics from AtoM (if any)
  - `rico:carrierType` = Determined by content analysis

### Content Analysis for Instantiation Type

Mnemian determines whether described materials are physical or digital through:

#### Detection Methods:
1. **Title Analysis**: LLM processes record titles for keywords (e.g., "PST file from hard drive" → digital)
2. **Content Analysis**: LLM examines scope and content for digital indicators
3. **Default Behavior**: When uncertain, assume physical (creates physical instantiation)

#### Examples:
- **Physical**: "Correspondence files, 1950-1960" → Creates physical instantiation
- **Digital**: "PST file from hard drive of the Chairman" → Creates digital instantiation
- **Uncertain**: "Administrative records" → Defaults to physical instantiation

## 'Agent' Classification Strategy

RiC uses the term 'Agent' to represent people, corporate/institutional bodies, groups, families and mechanisms that are the creators and subjects of Archival matarial. We do not use the parent Ric 'Agent' entity type as we feel this is too generic, so we use separate agent classes (types):

### Agent Classes Used
- **`rico:Person`**: Individuals
- **`rico:CorporateBody`**: Institutions, organizations, corporate entities
- **`rico:Family`**: Family groups
- **`rico:Group`**: Other collective entities
- **`rico:Mechanism`**: Processes or systems created by Persons or Groups that perform Activities

### Agent Type Detection Logic
We analyze names and context to determine the appropriate RiC agent class:
- **Mechanism indicators**: "system", "process", "automated", "software", "application", "platform"
- **Family indicators**: "family", "clan", "dynasty", "house"
- **Corporate body indicators**: "inc.", "corp.", "university", "college", "institute", "foundation"
- **Group indicators**: "committee", "team", "group", "collective", "board", "council"
- **Default**: Person for individual names

## Relationship Modeling

We use a combination of classes and simple properties to enable relationship modeling between RiC entities:

### Hierarchical Relationships
- **RecordSet** → **Record** → **RecordPart** hierarchy
- **Relationship Class**: `rico:RecordResourceToRecordResourceRelation`
- **Types**: `isPartOf` / `hasPart`

### N-ary Relations
- **`rico:AgentToRecordResourceRelation`**: Links agents to records with specific roles
- **`rico:RecordResourceToRecordResourceRelation`**: Links records to other records
- **`rico:IntellectualPropertyRightsRelation`**: Complex rights relationships

## Shared Entity Strategy

We create and reuse shared typed entities to maintain consistency across records:

### Controlled Vocabulary Entities
- **`rico:IdentifierType`**: "Reference code", "Alternative", "Repository identifier"
- **`rico:TitleType`**: "Description title", "Formal title"
- **`rico:RecordSetType`**: From AtoM level_of_description
- **`rico:ExtentType`**: "Boxes", "Linear feet", "Items"
- **`rico:CarrierType`**: "Digital", "Paper", "Microfilm"
- **`skos:ConceptScheme`**: "Subjects" for subject access points

### Deduplication Logic
- **Identifiers**: Dedupe by textualValue + IdentifierType within a record
- **Dates**: Dedupe by linkProperty + expressedDate + start/end (normalizedValue)
- **SKOS Concepts**: Dedupe by case-insensitive prefLabel within the same ConceptScheme
- **Places**: Dedupe by PlaceName textual value (case-insensitive)
- **Agents**: Reuse by exact name match (simple heuristic)

## Implementation Example

```turtle
# Core record resource
:Item_123 a rico:RecordSet ;
  rico:title "Administrative Records, 1950-1960"@en ;
  rico:scopeAndContent "Records documenting administrative activities..."@en .

# Digital archival description instantiation (always present)
:Item_123_archival_desc a rico:Instantiation ;
  rico:carrierType :Digital ;
  rico:structure "Structured metadata, held in Access to Memory (AtoM) database"@en ;
  dc:source "https://atom.example.com/123" .

# Physical item instantiation (conditional)
:Item_123_physical a rico:Instantiation ;
  rico:physicalCharacteristicsNote "Records are on acid-free paper with some foxing..."@en .

# Relationships (both instantiations linked to the same RecordResource)
:Item_123 rico:hasOrHadDigitalInstantiation :Item_123_archival_desc ;
  rico:hasOrHadDigitalInstantiation :Item_123_physical .
```

## Future Extensibility

This architecture supports additional instantiation types:
- **Digital Surrogates**: For additional digitized copies of physical materials - including IIIF
- **Finding Aids**: For PDF or other finding aid documents
- **Born-Digital Materials**: For native digital records
- **Multiple Formats**: For records existing in multiple physical or digital forms